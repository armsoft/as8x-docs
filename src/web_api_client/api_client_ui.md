
## Բովանդակություն

- [Api Client-ի ստեղծում](#api-client-ի-ստեղծում)
- [Մանիֆեստ](#մանիֆեստ)
- [Մանիֆեստի դաշտերի նկարագրություն](#մանիֆեստի-դաշտերի-նկարագրություն)
- [Մանիֆեստի օրինակ](#մանիֆեստի-օրինակ)
- [Մանիֆեստի ներմուծում](#մանիֆեստի-ներմուծում)
- [Մանիֆեստի արտահանում](#մանիֆեստի-արտահանում)

## Api Client-ի ստեղծում

8X սերվիս լոգին լինելու համար անհրաժեշտ է նախապես սահմանել մուտք գործող կլիենտ ծրագիր։

Այն անհրաժեշտ է ստեղծել 4X կամ 8X համակարգի UI-ի **Ադմինիստրատորի ԱՇՏ**-ի **API Client-ներ** դիտելու ձևի **Ավելացնել** կոնտեքստային ֆունկցիայով՝ նշելով`
* կլիենտի անվանումը (առավելագույնը 50 նիշ),
* Json ֆորմատի [Մանիֆեստ](#Մանիֆեստ) ֆայլ, որը սահմանում է կլիենտ ծրագրի իրավասությունները և սահմանափակումները (որ օգտագործողները կարող են մուտք գործել համակարգ, 
որ տվյալների աղբյուրներին, փաստաթղթերին, DPR-ներին կարող են դիմել ու որ API կանչերը կատարել),
* կլիենտի վավերականացման եղանակը՝ սերտիֆիկատով կամ բանալիով,

**Սերտիֆիկատով** նշիչը ընտրելու դեպքում անհրաժեշտ է նշել **Սերտիֆիկատի ճանապարհը**, հակառակ դեպքում **Բանալի** դաշտում անհրաժեշտ է նշելով բանալու արժեքը կամ գեներացնել այն **Գեներացնել** կոճակի միջոցով։

* կլիենտը ակտիվ է թե ոչ,
* կլիենտը Unicode կոդավորմամբ է թե Ansi:

![api_client_add](../images/api_client_add.png)

## Մանիֆեստ 

**Մանիֆեստ**-ը json ընդլայնմամբ ֆայլ է, որը պարունակում է կլիենտ ծրագրի իրավասություններն ու սահմանափակումները՝ 
* որ օգտագործողները կարող են մուտք գործել համակարգ, 
* ինչ տվյալների աղբյուրների, փաստաթղթերի և DPR-ների կարող են դիմել,
* ինչ API կանչեր կարող են կատարվել։

**Մանիֆեստ** ֆայլի կառուցվածքը նկարագրված է JsonSchema-ով, որը հասանելի է https://armsoftupdates.blob.core.windows.net/schemas/ClientՄանիֆեստJsonSchema.json հասցեով։

JsonSchema-ն օգտագործելու համար անհրաժեշտ է՝
* բացել Visual Studio-ի **Tools** մենյուի **Options** պատուհանը,
* պատուհանի **Json -> Schema** բաժնում ավելացնել սխեմայի հասցեն։

![options_json_schema_add](../images/options_json_schema_add.png)

Այս քայլերի կատարումից հետո Visual Studio-ի միջավայրում .json ընդլայնմամբ ֆայլերի համար Schema անհրաժեշտ է ընտրել https://armsoftupdates.blob.core.windows.net/schemas/ClientՄանիֆեստJsonSchema.json հասցեով JsonSchema-ն։

![json_schema_apply](../images/json_schema_apply.png)

## Մանիֆեստի դաշտերի նկարագրություն

| Անուն                      | Նկարագրություն                                                                                                   | Շարահյուսություն                                                                                                                                          |
|----------------------------|----------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| `dataSources`             | Պարունակում է թույլատրելի տվյալների աղբյուրների անունները:                                                       | `"dataSources": [ "DS1", "DS2" ]`                                                                                                                        |
| `allDataSources`          | Ցույց է տալիս բոլոր տվյալների աղբյուրների հասանելիությունը, true արժեքի դեպքում անտեսվում է `dataSources` ցուցակը։ | `"allDataSources": true`                                                                                                                                 |
| `documents`               | Պարունակում է թույլատրելի փաստաթղթերի անունները:                                                                | `"documents": [ "Doc1", "Doc2" ]`                                                                                                                        |
| `allDocuments`            | Ցույց է տալիս բոլոր փաստաթղթերի հասանելիությունը, true արժեքի դեպքում անտեսվում է `documents` ցուցակը։           | `"allDocuments": true`                                                                                                                                   |
| `dataProcessingRequests`  | Պարունակում է բոլոր թույլատրելի տվյալների մշակման հարցումների (DPR-ների) ցուցակը։                                            | `"dataProcessingRequests": [ { "name": "Dpr1", "type": 21 }, { "name": "Dpr2", "type": 22 } ]`                                                           |
| `allDataProcessingRequests` | Ցույց է տալիս բոլոր տվյալների մշակման հարցումների հասանելիությունը, true արժեքի դեպքում անտեսվում է `dataProcessingRequests` ցուցակը։ | `"allDataProcessingRequests": true`                                                                                                                      |
| `controllers`             | Պարունակում է թույլատրելի controller-ները իրենց action-ներով:                                                    | `"controllers": { "Cntrl1": { "allActions": true }, "Cntrl2": { "actions": [ "action1" ] } }`                                                            |
| `allControllers`          | Ցույց է տալիս բոլոր controller-ների հասանելիությունը, true արժեքի դեպքում անտեսվում է `controllers`-ը։           | `"allControllers": true`                                                                                                                                 |
| `users`                   | Պարունակում է թույլատրելի օգտագործողների անունները:                                                              | `"users": [ "user1", "user2" ]`                                                                                                                          |
| `allUsers`                | Ցույց է տալիս բոլոր օգտագործողների հասանելիությունը, true արժեքի դեպքում անտեսվում է `users` ցուցակը։             | `"allUsers": true`                                                                                                                                       |

## Մանիֆեստի օրինակ

```json
{
  "dataSources": [
    "DS1",
    "DS2"
  ],
  "documents": [
    "Doc1",
    "Doc2"
  ],
  "allDataProcessingRequests": true,
  "controllers": {
    "Cntrl1": {
      "allActions": true
    },
    "Cntrl2": {
      "actions": [
        "action1"
      ]
    }
  },
  "users": [
    "user1",
    "user2"
  ]
}
```
## Մանիֆեստի ներմուծում

Գոյություն ունեցող կլիենտ ծրագրի **Մանիֆեստ**-ը փոփոխելու համար անհրաժեշտ է կանչել **Ադմինիստրատորի ԱՇՏ**-ի **API Client-ներ** դիտելու ձևի **Մանիֆեստի ներմուծում** կոնտեքստային ֆունկցիան և բացված պատուհանում նշել ներմուծվող մանիֆեստի ճանապարհը։

## Մանիֆեստի արտահանում

Գոյություն ունեցող կլիենտ ծրագրի **Մանիֆեստ**-ը ստանալու համար անհրաժեշտ է կանչել **Ադմինիստրատորի ԱՇՏ**-ի **API Client-ներ** դիտելու ձևի **Մանիֆեստի արտահանում** կոնտեքստային ֆունկցիան և բացված պատուհանում նշել ֆայլի արտահանման ճանապարհը։